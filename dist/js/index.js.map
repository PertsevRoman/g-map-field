{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/index.js","src/js/lib/map-marker.js","src/js/lib/map.js","src/js/lib/path-generator.js","src/js/lib/path.js","src/js/lib/renderer.js","src/js/lib/utils.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * Created by joker on 13.12.16.\n *\n * Получение данных\n */\n\nimport {PathGenerator} from \"./lib/path-generator\";\nimport {GMap} from \"./lib/map\";\nimport Renderer from \"./lib/renderer\";\nimport {Path} from \"./lib/path\";\n\nconst componentName = 'path-input';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n    let componentAnchor = document.getElementsByTagName(componentName)[0];\n\n    if(componentAnchor == null) {\n        console.log('Component tag not founded');\n        return;\n    }\n    \n    let templateName = componentAnchor.getAttribute('template');\n    let fieldValue = componentAnchor.getAttribute('field-value');\n    let fieldName = componentAnchor.getAttribute('field-name');\n    let iconsResource = componentAnchor.getAttribute('icons-resource');\n\n    $.get(iconsResource, function (icons) {\n        $.get(templateName, function (data) {\n            try {\n                let Prof = Vue.extend({\n                    template: data,\n                    mounted: function () {\n                        this.init();\n\n                        this.fieldName = fieldName;\n\n                        if(fieldValue) {\n                            this.beginPath(fieldValue);\n                        } else {\n                            this.beginPath();\n                        }\n                    },\n                    data: function () {\n                        return {\n                            pathGenerator: null,\n                            map: null,\n                            currentPath: new Path([]),\n                            renderer: null,\n                            inEdit: true,\n                            fieldName: ''\n                        };\n                    },\n                    computed: {\n                        icons: function () {\n                            return icons;\n                        }\n                    },\n                    methods: {\n                        beginPath: function (data) {\n                            if(this.currentPath) {\n                                this.currentPath.clear();\n                            }\n\n                            this.pathGenerator.defaultIcon = icons[0].icon;\n                            this.pathGenerator.start(this.currentPath, data);\n                        },\n                        finishPath: function () {\n                            this.pathGenerator.finish();\n                        },\n                        toTop: function (index) {\n                            this.currentPath.indexDispose(index, -1);\n                        },\n                        toDown: function (index) {\n                            this.currentPath.indexDispose(index, 1);\n                        },\n                        remove: function (index) {\n                            this.currentPath.indexRemove(index);\n                        },\n                        center: function (point) {\n                            let latLng = point.latLng;\n\n                            this.map.map.setCenter(latLng);\n                        },\n                        clearPath: function () {\n                            this.currentPath.clear();\n                        },\n                        setAhead: function (point, ahead) {\n                            point.setAhead(ahead);\n                            \n                            this.renderer.render(this.currentPath);\n                        },\n                        init: function () {\n                            let element = this.$el.querySelector('.g-maps');\n\n                            this.map = new GMap(element);\n                            this.pathGenerator = new PathGenerator(this.map);\n                            this.renderer = new Renderer(this.map);\n\n                            this.currentPath.addUpdateListener(function () {\n                                /* rem-block */\n                                console.log('Path updating...');\n                                /* end-rem-block */\n\n                                this.renderer.render(this.currentPath);\n                                this.$forceUpdate();\n                            }.bind(this));\n\n                            this.pathGenerator.appendAddListener(function () {\n                                const elemPosition = this.currentPath.size;\n\n                                /* rem-block */\n                                console.log('Adding point...');\n                                /* end-rem-block */\n\n                                setTimeout(function () {\n                                    const selector = 'input[date-time=\"dt-' + (elemPosition - 1) + '\"]';\n                                    const pickerAnchor = $(selector);\n\n                                    pickerAnchor.timepicker({\n                                        showMeridian: false\n                                    }).on('changeTime.timepicker', function (e) {\n                                        const value = e.time.value;\n                                        let index = pickerAnchor.attr('data-index');\n\n                                        this.currentPath.pointValue(index, 'time', value);\n\n                                        /* rem-block */\n                                        console.log('Point added');\n                                        /* end-rem-block */\n                                    }.bind(this));\n                                }.bind(this), 500);\n                            }.bind(this));\n\n                            google.maps.event.addListener(this.map.map, 'click', function(event) {\n                                const markerCoords = event.latLng;\n\n                                this.pathGenerator.add({\n                                    position: markerCoords.toJSON()\n                                });\n\n                                this.$forceUpdate();\n                            }.bind(this));\n                        }\n                    }\n                });\n\n                /* rem-block */\n                console.log('Load component...');\n                /* end-rem-block */\n\n                new Prof().$mount(componentName);\n            } catch (error) {\n                console.log(error);\n                console.log('Не удается определить компонент: Vue.js не инициализирован');\n            }\n        });\n    });\n});","/**\n * Created by joker on 15.12.16.\n */\nexport class MapMarker {\n    get meta() {\n        return this._meta;\n    }\n\n    set meta(value) {\n        this._meta = value;\n    }\n\n    get draggable() {\n        return this._marker.getDraggable();\n    }\n\n    set draggable(value) {\n        this._marker.setDraggable(value);\n    }\n    get icon() {\n        return this._icon;\n    }\n    get time() {\n        return this._time;\n    }\n\n    set time(value) {\n        this._time = value;\n    }\n    get map() {\n        return this._map;\n    }\n\n    set map(value) {\n        this._map = value;\n        this.marker.setMap(value.map);\n    }\n    get latLng() {\n        return this._latLng;\n    }\n\n    set latLng(value) {\n        this._latLng = value;\n\n        this.marker.setPosition(new google.maps.LatLng(value.lat, value.lng));\n    }\n\n    get visible() {\n        return this._marker.getVisible();\n    }\n\n    set visible(value) {\n        this._marker.setVisible(value);\n        this._visible = value;\n    }\n    get description() {\n        return this._description;\n    }\n\n    set icon(path) {\n        this._icon = path;\n    }\n\n    set description(value) {\n        this._description = value;\n\n        if(this._ahead) {\n            this._ahead = false;\n            return;\n        }\n\n        if(this._description != '') {\n            if(dropdownResolver != undefined) {\n                dropdownResolver(value, function (points) {\n                    let typeahead = [];\n                    \n                    for(let index in points) {\n                        let item = {\n                            _meta: {\n                                id: points[index].id\n                            },\n                            name: points[index].name,\n                            lat: points[index].lat,\n                            lng: points[index].lng\n                        };\n\n                        if(points[index].display != undefined) {\n                            item['display'] = points[index].display;\n                        }\n\n                        typeahead.push(item);\n                    }\n\n                    this.typeahead = typeahead;\n                }.bind(this));\n            }\n        } else {\n            this.typeahead = [];\n        }\n    }\n    \n    get label() {\n        return this._label;\n    }\n\n    set label(value) {\n        this._label = value;\n\n        if(this._marker) {\n            this._marker.setLabel(value);\n        }\n    }\n    get marker() {\n        return this._marker;\n    }\n    get template() {\n        return this._template;\n    }\n\n    set template(value) {\n        this._template = value;\n    }\n\n    get serial() {\n        let seria = {\n            description: this.description,\n            position: this.marker.getPosition().toJSON(),\n            visible: this.visible,\n            time: this.time,\n            icon: this.icon,\n            draggable: this.draggable,\n            meta: this.meta\n        };\n\n        return JSON.stringify(seria);\n    }\n    \n    remove() {\n        this.marker.setMap(null);\n    }\n\n    setAhead(ahead) {\n        this._ahead = true;\n\n        this.description = ahead.name;\n\n        const position = {\n            lat: ahead.lat,\n            lng: ahead.lng\n        };\n\n        if(ahead['display'] != undefined) {\n            if(ahead['display']['svg'] != undefined) {\n                this.icon = ahead['display']['svg'];\n            }\n        }\n\n        this.latLng = position;\n        this.meta = ahead._meta;\n\n        this.typeahead = [];\n    }\n\n    set serial(value) {\n        let pos = value.position;\n\n        this.latLng = new google.maps.LatLng(pos);\n        this.description = value.description || '';\n        if(value.label) {\n            this.label = value.label + '';\n        }\n        \n        if(typeof value.visible === 'boolean') {\n            this.visible = value.visible;\n        } else {\n            this.visible = true;\n        }\n\n        this.time = value.time || '0:00';\n        this.icon = value.icon || '';\n        this.meta = value.meta || {};\n\n        this.marker.setPosition(this.latLng);\n        this.marker.setLabel(this.label);\n        this.marker.setVisible(this.visible);\n    }\n\n    constructor(map, coords, template) {\n        if(!map) {\n            throw 'Не определена карта';\n        }\n\n        this._marker = new google.maps.Marker({\n            map: map.map,\n            position: coords,\n            draggable: true\n        });\n        \n        this.map = map;\n\n        if(template) {\n            this.template = template;\n        }\n    }\n\n    _time = '';\n    _map = null;\n    _latLng = {};\n    _description = '';\n    _marker = null;\n    _template = 'content.html';\n    _label = '';\n    _visible = true;\n    _icon = '';\n    typeahead = [];\n    _meta = {};\n\n    getPosition() {\n        return this._marker.getPosition();\n    }\n\n    get coordsStr() {\n        let pos = this.getPosition();\n        return pos.toString();\n    }\n\n    addInfo() {\n        let data = document.createElement('div');\n\n        $(data).load('src/tpl/' + this.template);\n\n        let infowindow = new google.maps.InfoWindow({\n            content: data\n        });\n\n        this._marker.addListener('mouseover', function() {\n            infowindow.open(map, this._marker);\n        });\n\n        this._marker.addListener('mouseout', function() {\n            infowindow.close();\n        });\n    }\n}","/**\n * Created by joker on 15.12.16.\n */\n\nexport class GMap {\n    get map() {\n        return this._map;\n    }\n\n    set map(value) {\n        this._map = value;\n    }\n\n    /**\n     * Ссылка на объект карт\n     */\n    _map;\n\n    constructor(element) {\n        var pointCoords = {lat: 52.61667, lng: 39.6000};\n\n        this._map = new google.maps.Map(element, {\n            center: pointCoords,\n            zoom: 16\n        });\n\n        google.maps.event.trigger(this._map, 'resize');\n    }\n}","import {Path} from \"./path\";\nimport {MapMarker} from \"./map-marker\";\n/**\n * Created by joker on 15.12.16.\n */\n\nexport class PathGenerator {\n    get defaultIcon() {\n        return this._defaultIcon;\n    }\n\n    set defaultIcon(value) {\n        this._defaultIcon = value;\n    }\n    get counter() {\n        return this._counter;\n    }\n\n    set counter(value) {\n        this._counter = value;\n    }\n    get map() {\n        return this._map;\n    }\n\n    set map(value) {\n        this._map = value;\n    }\n    _map;\n    _path = [];\n    _counter = 1;\n    _addedListeners = [];\n    _defaultIcon = '';\n\n    constructor(map) {\n        if(map) {\n            this.map = map;\n        }\n    }\n\n    /**\n     * Запуск генератора\n     */\n    start(path, data) {\n        this._path = path;\n\n        if(data) {\n            this._path.clear();\n\n            let markersArray = JSON.parse(data);\n\n            for (let markerJson of markersArray) {\n                this.add(markerJson);\n            }\n        }\n    }\n\n    finish() {\n        this._path = null;\n    }\n    \n    appendAddListener(handler) {\n        this._addedListeners.push(handler);\n    }\n\n    add(markerJson) {\n        if(this._path) {\n            let marker = new MapMarker(this.map, markerJson.position);\n\n            markerJson.label = this._path.markers.length + 1;\n\n            marker.serial = markerJson;\n\n            if(marker.icon === '') {\n                marker.icon = this.defaultIcon;\n            }\n\n            this._path.add(marker);\n            \n            for(let handler of this._addedListeners) {\n                handler();\n            }\n        }\n    }\n}","/**\n * Created by joker on 15.12.16.\n *\n *\n */\nimport {assert as assert} from './utils';\n\nexport class Path {\n    get markers() {\n        return this._markers;\n    }\n\n    set markers(value) {\n        this._markers = value;\n    }\n        \n    _markers = [];\n    _updateListeners = [];\n\n    /**\n     * Получение сериализованного массива\n     */\n    get serial() {\n        let serias = this._markers.map(function (mark) {\n            return mark.serial;\n        }).join(',');\n\n        let res = '[' + serias + ']';\n        \n        return res;\n    }\n\n    get coordsArray() {\n        let result = this.markers.map(function (coord) {\n            return coord.getPosition();\n        });\n\n        return result;\n    }\n    \n    pointValue(index, field, value) {\n        assert(index > -1 && index < this._markers.length);\n        \n        this._markers[index][field] = value;\n    }\n    \n    get size() {\n        return this._markers.length;\n    }\n\n    /**\n     * Смена позиции индекса\n     * @param index Индекс\n     * @param crem Смещение\n     */\n    indexDispose(index, crem) {\n        let s = index + crem;\n\n        assert(index > -1 && index < this._markers.length);\n        assert(s > -1 && s < this._markers.length);\n\n        let elem = this._markers[s];\n\n        this._markers[s] = this._markers[index];\n        this._markers[index] = elem;\n\n        this.callUpdateHandlers();\n    }\n\n    indexRemove(index) {\n        assert(index > -1 && index < this._markers.length);\n\n        let elem = this._markers[index];\n        elem.marker.setMap(null);\n\n        this._markers.splice(index, 1);\n\n        this.callUpdateHandlers();\n    }\n\n    get coordsStr() {\n        let res = '';\n        \n        for(let mark of this._markers) {\n            res += mark.coordsStr;\n        }\n\n        return res;\n    }\n    \n    addUpdateListener(handler) {\n        this._updateListeners.push(handler);\n    }\n\n    clear() {\n        for(let mark of this.markers) {\n            mark.marker.setMap(null);\n        }\n\n        this.markers = [];\n        \n        this.callUpdateHandlers();\n    }\n\n    callUpdateHandlers() {\n        for(let handler of this._updateListeners) {\n            handler();\n        }\n    }\n\n    add(marker) {\n        this.markers.push(marker);\n        marker.marker.addListener('dragend', function () {\n            this.callUpdateHandlers();\n        }.bind(this));\n\n        if(this.markers.length > 1) {\n            this.callUpdateHandlers();\n        }\n    }\n\n    refreshLabels() {\n        let index = 1;\n        for(let mark of this.markers) {\n            if(mark.visible) {\n                mark.label = index + '';\n                index += 1;\n            }\n        }\n    }\n\n    constructor(markers) {\n        this.markers = markers;\n\n        this.addUpdateListener(function () {\n            this.refreshLabels();\n        }.bind(this));\n    }\n}","/**\n * Created by joker on 15.12.16.\n */\n\nexport default class Renderer {\n    get map() {\n        return this._map;\n    }\n\n    set map(value) {\n        this._map = value;\n    }\n    \n    _map = null;\n    \n    \n    constructor(map) {\n        this._directionsService = new google.maps.DirectionsService();\n        this._directionsDisplay = new google.maps.DirectionsRenderer();\n        \n        this.map = map;\n    }\n\n    waypoints(coords) {\n        let result = [];\n\n        for(let i = 1; i < coords.length - 1; ++i) {\n            result.push({\n                location: coords[i],\n                stopover: false\n            });\n        }\n\n        return result;\n    }\n\n    render(path) {\n        let coords = path.coordsArray;\n\n        if(coords.length < 2) {\n            this._directionsDisplay.setMap(null);\n            return;\n        }\n\n        this._directionsDisplay.setMap(this.map.map);\n\n        let waypoints = this.waypoints(coords);\n\n        let request = {\n            origin: coords[0],\n            waypoints,\n            destination: coords[coords.length - 1],\n            travelMode: google.maps.TravelMode.DRIVING\n        };\n\n        this._directionsService.route(request, function(response, status) {\n            if (status == google.maps.DirectionsStatus.OK) {\n                this._directionsDisplay.setDirections(response);\n            }\n        }.bind(this));\n    }\n}","/**\n * Created by joker on 15.12.16.\n */\n\nexport function assert(condition, message) {\n    if (!condition) {\n        throw message || \"Assertion failed\";\n    }\n}"],"preExisting":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvaW5kZXguanMiLCJzcmMvanMvbGliL21hcC1tYXJrZXIuanMiLCJzcmMvanMvbGliL21hcC5qcyIsInNyYy9qcy9saWIvcGF0aC1nZW5lcmF0b3IuanMiLCJzcmMvanMvbGliL3BhdGguanMiLCJzcmMvanMvbGliL3JlbmRlcmVyLmpzIiwic3JjL2pzL2xpYi91dGlscy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDTUE7O0FBQ0E7O0FBQ0E7Ozs7QUFDQTs7OztBQVRBOzs7Ozs7QUFXQSxJQUFNLGdCQUFnQixZQUF0Qjs7QUFFQSxTQUFTLGdCQUFULENBQTBCLGtCQUExQixFQUE4QyxZQUFZO0FBQ3RELFFBQUksa0JBQWtCLFNBQVMsb0JBQVQsQ0FBOEIsYUFBOUIsRUFBNkMsQ0FBN0MsQ0FBdEI7O0FBRUEsUUFBRyxtQkFBbUIsSUFBdEIsRUFBNEI7QUFDeEIsZ0JBQVEsR0FBUixDQUFZLDJCQUFaO0FBQ0E7QUFDSDs7QUFFRCxRQUFJLGVBQWUsZ0JBQWdCLFlBQWhCLENBQTZCLFVBQTdCLENBQW5CO0FBQ0EsUUFBSSxhQUFhLGdCQUFnQixZQUFoQixDQUE2QixhQUE3QixDQUFqQjtBQUNBLFFBQUksWUFBWSxnQkFBZ0IsWUFBaEIsQ0FBNkIsWUFBN0IsQ0FBaEI7QUFDQSxRQUFJLGdCQUFnQixnQkFBZ0IsWUFBaEIsQ0FBNkIsZ0JBQTdCLENBQXBCOztBQUVBLE1BQUUsR0FBRixDQUFNLGFBQU4sRUFBcUIsVUFBVSxNQUFWLEVBQWlCO0FBQ2xDLFVBQUUsR0FBRixDQUFNLFlBQU4sRUFBb0IsVUFBVSxJQUFWLEVBQWdCO0FBQ2hDLGdCQUFJO0FBQ0Esb0JBQUksT0FBTyxJQUFJLE1BQUosQ0FBVztBQUNsQiw4QkFBVSxJQURRO0FBRWxCLDZCQUFTLG1CQUFZO0FBQ2pCLDZCQUFLLElBQUw7O0FBRUEsNkJBQUssU0FBTCxHQUFpQixTQUFqQjs7QUFF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O0FBQ1osY0FBTSxXQUFXLGtCQUFqQjtBQUNIO0FBQ0oiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGpva2VyIG9uIDEzLjEyLjE2LlxuICpcbiAqINCf0L7Qu9GD0YfQtdC90LjQtSDQtNCw0L3QvdGL0YVcbiAqL1xuXG5pbXBvcnQge1BhdGhHZW5lcmF0b3J9IGZyb20gXCIuL2xpYi9wYXRoLWdlbmVyYXRvclwiO1xuaW1wb3J0IHtHTWFwfSBmcm9tIFwiLi9saWIvbWFwXCI7XG5pbXBvcnQgUmVuZGVyZXIgZnJvbSBcIi4vbGliL3JlbmRlcmVyXCI7XG5pbXBvcnQge1BhdGh9IGZyb20gXCIuL2xpYi9wYXRoXCI7XG5cbmNvbnN0IGNvbXBvbmVudE5hbWUgPSAncGF0aC1pbnB1dCc7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IGNvbXBvbmVudEFuY2hvciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKGNvbXBvbmVudE5hbWUpWzBdO1xuXG4gICAgaWYoY29tcG9uZW50QW5jaG9yID09IG51bGwpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0NvbXBvbmVudCB0YWcgbm90IGZvdW5kZWQnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBsZXQgdGVtcGxhdGVOYW1lID0gY29tcG9uZW50QW5jaG9yLmdldEF0dHJpYnV0ZSgndGVtcGxhdGUnKTtcbiAgICBsZXQgZmllbGRWYWx1ZSA9IGNvbXBvbmVudEFuY2hvci5nZXRBdHRyaWJ1dGUoJ2ZpZWxkLXZhbHVlJyk7XG4gICAgbGV0IGZpZWxkTmFtZSA9IGNvbXBvbmVudEFuY2hvci5nZXRBdHRyaWJ1dGUoJ2ZpZWxkLW5hbWUnKTtcbiAgICBsZXQgaWNvbnNSZXNvdXJjZSA9IGNvbXBvbmVudEFuY2hvci5nZXRBdHRyaWJ1dGUoJ2ljb25zLXJlc291cmNlJyk7XG5cbiAgICAkLmdldChpY29uc1Jlc291cmNlLCBmdW5jdGlvbiAoaWNvbnMpIHtcbiAgICAgICAgJC5nZXQodGVtcGxhdGVOYW1lLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBsZXQgUHJvZiA9IFZ1ZS5leHRlbmQoe1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgbW91bnRlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmllbGROYW1lID0gZmllbGROYW1lO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihmaWVsZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iZWdpblBhdGgoZmllbGRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aEdlbmVyYXRvcjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IG5ldyBQYXRoKFtdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJlcjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbkVkaXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGROYW1lOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY29tcHV0ZWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb25zOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGljb25zO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBtZXRob2RzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiZWdpblBhdGg6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5jdXJyZW50UGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYXRoLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXRoR2VuZXJhdG9yLmRlZmF1bHRJY29uID0gaWNvbnNbMF0uaWNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhdGhHZW5lcmF0b3Iuc3RhcnQodGhpcy5jdXJyZW50UGF0aCwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZmluaXNoUGF0aDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGF0aEdlbmVyYXRvci5maW5pc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB0b1RvcDogZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGF0aC5pbmRleERpc3Bvc2UoaW5kZXgsIC0xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB0b0Rvd246IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhdGguaW5kZXhEaXNwb3NlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhdGguaW5kZXhSZW1vdmUoaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlcjogZnVuY3Rpb24gKHBvaW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxhdExuZyA9IHBvaW50LmxhdExuZztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFwLm1hcC5zZXRDZW50ZXIobGF0TG5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclBhdGg6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYXRoLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0QWhlYWQ6IGZ1bmN0aW9uIChwb2ludCwgYWhlYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludC5zZXRBaGVhZChhaGVhZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW5kZXIodGhpcy5jdXJyZW50UGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbGVtZW50ID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvcignLmctbWFwcycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXAgPSBuZXcgR01hcChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhdGhHZW5lcmF0b3IgPSBuZXcgUGF0aEdlbmVyYXRvcih0aGlzLm1hcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyBSZW5kZXJlcih0aGlzLm1hcCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYXRoLmFkZFVwZGF0ZUxpc3RlbmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogcmVtLWJsb2NrICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQYXRoIHVwZGF0aW5nLi4uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVuZC1yZW0tYmxvY2sgKi9cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLmN1cnJlbnRQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXRoR2VuZXJhdG9yLmFwcGVuZEFkZExpc3RlbmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbVBvc2l0aW9uID0gdGhpcy5jdXJyZW50UGF0aC5zaXplO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHJlbS1ibG9jayAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQWRkaW5nIHBvaW50Li4uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVuZC1yZW0tYmxvY2sgKi9cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdG9yID0gJ2lucHV0W2RhdGUtdGltZT1cImR0LScgKyAoZWxlbVBvc2l0aW9uIC0gMSkgKyAnXCJdJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBpY2tlckFuY2hvciA9ICQoc2VsZWN0b3IpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaWNrZXJBbmNob3IudGltZXBpY2tlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd01lcmlkaWFuOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkub24oJ2NoYW5nZVRpbWUudGltZXBpY2tlcicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBlLnRpbWUudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gcGlja2VyQW5jaG9yLmF0dHIoJ2RhdGEtaW5kZXgnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhdGgucG9pbnRWYWx1ZShpbmRleCwgJ3RpbWUnLCB2YWx1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiByZW0tYmxvY2sgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUG9pbnQgYWRkZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBlbmQtcmVtLWJsb2NrICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcyksIDUwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHRoaXMubWFwLm1hcCwgJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya2VyQ29vcmRzID0gZXZlbnQubGF0TG5nO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGF0aEdlbmVyYXRvci5hZGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IG1hcmtlckNvb3Jkcy50b0pTT04oKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8qIHJlbS1ibG9jayAqL1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdMb2FkIGNvbXBvbmVudC4uLicpO1xuICAgICAgICAgICAgICAgIC8qIGVuZC1yZW0tYmxvY2sgKi9cblxuICAgICAgICAgICAgICAgIG5ldyBQcm9mKCkuJG1vdW50KGNvbXBvbmVudE5hbWUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ9Cd0LUg0YPQtNCw0LXRgtGB0Y8g0L7Qv9GA0LXQtNC10LvQuNGC0Ywg0LrQvtC80L/QvtC90LXQvdGCOiBWdWUuanMg0L3QtSDQuNC90LjRhtC40LDQu9C40LfQuNGA0L7QstCw0L0nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgam9rZXIgb24gMTUuMTIuMTYuXG4gKi9cbmV4cG9ydCBjbGFzcyBNYXBNYXJrZXIge1xuICAgIGdldCBtZXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWV0YTtcbiAgICB9XG5cbiAgICBzZXQgbWV0YSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9tZXRhID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGRyYWdnYWJsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcmtlci5nZXREcmFnZ2FibGUoKTtcbiAgICB9XG5cbiAgICBzZXQgZHJhZ2dhYmxlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX21hcmtlci5zZXREcmFnZ2FibGUodmFsdWUpO1xuICAgIH1cbiAgICBnZXQgaWNvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ljb247XG4gICAgfVxuICAgIGdldCB0aW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGltZTtcbiAgICB9XG5cbiAgICBzZXQgdGltZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl90aW1lID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCBtYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXA7XG4gICAgfVxuXG4gICAgc2V0IG1hcCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9tYXAgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5tYXJrZXIuc2V0TWFwKHZhbHVlLm1hcCk7XG4gICAgfVxuICAgIGdldCBsYXRMbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sYXRMbmc7XG4gICAgfVxuXG4gICAgc2V0IGxhdExuZyh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9sYXRMbmcgPSB2YWx1ZTtcblxuICAgICAgICB0aGlzLm1hcmtlci5zZXRQb3NpdGlvbihuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHZhbHVlLmxhdCwgdmFsdWUubG5nKSk7XG4gICAgfVxuXG4gICAgZ2V0IHZpc2libGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXJrZXIuZ2V0VmlzaWJsZSgpO1xuICAgIH1cblxuICAgIHNldCB2aXNpYmxlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX21hcmtlci5zZXRWaXNpYmxlKHZhbHVlKTtcbiAgICAgICAgdGhpcy5fdmlzaWJsZSA9IHZhbHVlO1xuICAgIH1cbiAgICBnZXQgZGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZXNjcmlwdGlvbjtcbiAgICB9XG5cbiAgICBzZXQgaWNvbihwYXRoKSB7XG4gICAgICAgIHRoaXMuX2ljb24gPSBwYXRoO1xuICAgIH1cblxuICAgIHNldCBkZXNjcmlwdGlvbih2YWx1ZSkge1xuICAgICAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IHZhbHVlO1xuXG4gICAgICAgIGlmKHRoaXMuX2FoZWFkKSB7XG4gICAgICAgICAgICB0aGlzLl9haGVhZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYodGhpcy5fZGVzY3JpcHRpb24gIT0gJycpIHtcbiAgICAgICAgICAgIGlmKGRyb3Bkb3duUmVzb2x2ZXIgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZHJvcGRvd25SZXNvbHZlcih2YWx1ZSwgZnVuY3Rpb24gKHBvaW50cykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdHlwZWFoZWFkID0gW107XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGluZGV4IGluIHBvaW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGl0ZW0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX21ldGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHBvaW50c1tpbmRleF0uaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHBvaW50c1tpbmRleF0ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXQ6IHBvaW50c1tpbmRleF0ubGF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxuZzogcG9pbnRzW2luZGV4XS5sbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHBvaW50c1tpbmRleF0uZGlzcGxheSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtWydkaXNwbGF5J10gPSBwb2ludHNbaW5kZXhdLmRpc3BsYXk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVhaGVhZC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy50eXBlYWhlYWQgPSB0eXBlYWhlYWQ7XG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudHlwZWFoZWFkID0gW107XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZ2V0IGxhYmVsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGFiZWw7XG4gICAgfVxuXG4gICAgc2V0IGxhYmVsKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2xhYmVsID0gdmFsdWU7XG5cbiAgICAgICAgaWYodGhpcy5fbWFya2VyKSB7XG4gICAgICAgICAgICB0aGlzLl9tYXJrZXIuc2V0TGFiZWwodmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBtYXJrZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXJrZXI7XG4gICAgfVxuICAgIGdldCB0ZW1wbGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RlbXBsYXRlO1xuICAgIH1cblxuICAgIHNldCB0ZW1wbGF0ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl90ZW1wbGF0ZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldCBzZXJpYWwoKSB7XG4gICAgICAgIGxldCBzZXJpYSA9IHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgcG9zaXRpb246IHRoaXMubWFya2VyLmdldFBvc2l0aW9uKCkudG9KU09OKCksXG4gICAgICAgICAgICB2aXNpYmxlOiB0aGlzLnZpc2libGUsXG4gICAgICAgICAgICB0aW1lOiB0aGlzLnRpbWUsXG4gICAgICAgICAgICBpY29uOiB0aGlzLmljb24sXG4gICAgICAgICAgICBkcmFnZ2FibGU6IHRoaXMuZHJhZ2dhYmxlLFxuICAgICAgICAgICAgbWV0YTogdGhpcy5tZXRhXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHNlcmlhKTtcbiAgICB9XG4gICAgXG4gICAgcmVtb3ZlKCkge1xuICAgICAgICB0aGlzLm1hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgfVxuXG4gICAgc2V0QWhlYWQoYWhlYWQpIHtcbiAgICAgICAgdGhpcy5fYWhlYWQgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBhaGVhZC5uYW1lO1xuXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0ge1xuICAgICAgICAgICAgbGF0OiBhaGVhZC5sYXQsXG4gICAgICAgICAgICBsbmc6IGFoZWFkLmxuZ1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmKGFoZWFkWydkaXNwbGF5J10gIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZihhaGVhZFsnZGlzcGxheSddWydzdmcnXSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmljb24gPSBhaGVhZFsnZGlzcGxheSddWydzdmcnXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubGF0TG5nID0gcG9zaXRpb247XG4gICAgICAgIHRoaXMubWV0YSA9IGFoZWFkLl9tZXRhO1xuXG4gICAgICAgIHRoaXMudHlwZWFoZWFkID0gW107XG4gICAgfVxuXG4gICAgc2V0IHNlcmlhbCh2YWx1ZSkge1xuICAgICAgICBsZXQgcG9zID0gdmFsdWUucG9zaXRpb247XG5cbiAgICAgICAgdGhpcy5sYXRMbmcgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHBvcyk7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSB2YWx1ZS5kZXNjcmlwdGlvbiB8fCAnJztcbiAgICAgICAgaWYodmFsdWUubGFiZWwpIHtcbiAgICAgICAgICAgIHRoaXMubGFiZWwgPSB2YWx1ZS5sYWJlbCArICcnO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZih0eXBlb2YgdmFsdWUudmlzaWJsZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICB0aGlzLnZpc2libGUgPSB2YWx1ZS52aXNpYmxlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudGltZSA9IHZhbHVlLnRpbWUgfHwgJzA6MDAnO1xuICAgICAgICB0aGlzLmljb24gPSB2YWx1ZS5pY29uIHx8ICcnO1xuICAgICAgICB0aGlzLm1ldGEgPSB2YWx1ZS5tZXRhIHx8IHt9O1xuXG4gICAgICAgIHRoaXMubWFya2VyLnNldFBvc2l0aW9uKHRoaXMubGF0TG5nKTtcbiAgICAgICAgdGhpcy5tYXJrZXIuc2V0TGFiZWwodGhpcy5sYWJlbCk7XG4gICAgICAgIHRoaXMubWFya2VyLnNldFZpc2libGUodGhpcy52aXNpYmxlKTtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcihtYXAsIGNvb3JkcywgdGVtcGxhdGUpIHtcbiAgICAgICAgaWYoIW1hcCkge1xuICAgICAgICAgICAgdGhyb3cgJ9Cd0LUg0L7Qv9GA0LXQtNC10LvQtdC90LAg0LrQsNGA0YLQsCc7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9tYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcbiAgICAgICAgICAgIG1hcDogbWFwLm1hcCxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBjb29yZHMsXG4gICAgICAgICAgICBkcmFnZ2FibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLm1hcCA9IG1hcDtcblxuICAgICAgICBpZih0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3RpbWUgPSAnJztcbiAgICBfbWFwID0gbnVsbDtcbiAgICBfbGF0TG5nID0ge307XG4gICAgX2Rlc2NyaXB0aW9uID0gJyc7XG4gICAgX21hcmtlciA9IG51bGw7XG4gICAgX3RlbXBsYXRlID0gJ2NvbnRlbnQuaHRtbCc7XG4gICAgX2xhYmVsID0gJyc7XG4gICAgX3Zpc2libGUgPSB0cnVlO1xuICAgIF9pY29uID0gJyc7XG4gICAgdHlwZWFoZWFkID0gW107XG4gICAgX21ldGEgPSB7fTtcblxuICAgIGdldFBvc2l0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWFya2VyLmdldFBvc2l0aW9uKCk7XG4gICAgfVxuXG4gICAgZ2V0IGNvb3Jkc1N0cigpIHtcbiAgICAgICAgbGV0IHBvcyA9IHRoaXMuZ2V0UG9zaXRpb24oKTtcbiAgICAgICAgcmV0dXJuIHBvcy50b1N0cmluZygpO1xuICAgIH1cblxuICAgIGFkZEluZm8oKSB7XG4gICAgICAgIGxldCBkYXRhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgJChkYXRhKS5sb2FkKCdzcmMvdHBsLycgKyB0aGlzLnRlbXBsYXRlKTtcblxuICAgICAgICBsZXQgaW5mb3dpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IGRhdGFcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fbWFya2VyLmFkZExpc3RlbmVyKCdtb3VzZW92ZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGluZm93aW5kb3cub3BlbihtYXAsIHRoaXMuX21hcmtlcik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuX21hcmtlci5hZGRMaXN0ZW5lcignbW91c2VvdXQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGluZm93aW5kb3cuY2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgfVxufSIsIi8qKlxuICogQ3JlYXRlZCBieSBqb2tlciBvbiAxNS4xMi4xNi5cbiAqL1xuXG5leHBvcnQgY2xhc3MgR01hcCB7XG4gICAgZ2V0IG1hcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcDtcbiAgICB9XG5cbiAgICBzZXQgbWFwKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX21hcCA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqINCh0YHRi9C70LrQsCDQvdCwINC+0LHRitC10LrRgiDQutCw0YDRglxuICAgICAqL1xuICAgIF9tYXA7XG5cbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50KSB7XG4gICAgICAgIHZhciBwb2ludENvb3JkcyA9IHtsYXQ6IDUyLjYxNjY3LCBsbmc6IDM5LjYwMDB9O1xuXG4gICAgICAgIHRoaXMuX21hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZWxlbWVudCwge1xuICAgICAgICAgICAgY2VudGVyOiBwb2ludENvb3JkcyxcbiAgICAgICAgICAgIHpvb206IDE2XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIodGhpcy5fbWFwLCAncmVzaXplJyk7XG4gICAgfVxufSIsImltcG9ydCB7UGF0aH0gZnJvbSBcIi4vcGF0aFwiO1xuaW1wb3J0IHtNYXBNYXJrZXJ9IGZyb20gXCIuL21hcC1tYXJrZXJcIjtcbi8qKlxuICogQ3JlYXRlZCBieSBqb2tlciBvbiAxNS4xMi4xNi5cbiAqL1xuXG5leHBvcnQgY2xhc3MgUGF0aEdlbmVyYXRvciB7XG4gICAgZ2V0IGRlZmF1bHRJY29uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmYXVsdEljb247XG4gICAgfVxuXG4gICAgc2V0IGRlZmF1bHRJY29uKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2RlZmF1bHRJY29uID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCBjb3VudGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY291bnRlcjtcbiAgICB9XG5cbiAgICBzZXQgY291bnRlcih2YWx1ZSkge1xuICAgICAgICB0aGlzLl9jb3VudGVyID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCBtYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXA7XG4gICAgfVxuXG4gICAgc2V0IG1hcCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9tYXAgPSB2YWx1ZTtcbiAgICB9XG4gICAgX21hcDtcbiAgICBfcGF0aCA9IFtdO1xuICAgIF9jb3VudGVyID0gMTtcbiAgICBfYWRkZWRMaXN0ZW5lcnMgPSBbXTtcbiAgICBfZGVmYXVsdEljb24gPSAnJztcblxuICAgIGNvbnN0cnVjdG9yKG1hcCkge1xuICAgICAgICBpZihtYXApIHtcbiAgICAgICAgICAgIHRoaXMubWFwID0gbWFwO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog0JfQsNC/0YPRgdC6INCz0LXQvdC10YDQsNGC0L7RgNCwXG4gICAgICovXG4gICAgc3RhcnQocGF0aCwgZGF0YSkge1xuICAgICAgICB0aGlzLl9wYXRoID0gcGF0aDtcblxuICAgICAgICBpZihkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLl9wYXRoLmNsZWFyKCk7XG5cbiAgICAgICAgICAgIGxldCBtYXJrZXJzQXJyYXkgPSBKU09OLnBhcnNlKGRhdGEpO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBtYXJrZXJKc29uIG9mIG1hcmtlcnNBcnJheSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkKG1hcmtlckpzb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmluaXNoKCkge1xuICAgICAgICB0aGlzLl9wYXRoID0gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgYXBwZW5kQWRkTGlzdGVuZXIoaGFuZGxlcikge1xuICAgICAgICB0aGlzLl9hZGRlZExpc3RlbmVycy5wdXNoKGhhbmRsZXIpO1xuICAgIH1cblxuICAgIGFkZChtYXJrZXJKc29uKSB7XG4gICAgICAgIGlmKHRoaXMuX3BhdGgpIHtcbiAgICAgICAgICAgIGxldCBtYXJrZXIgPSBuZXcgTWFwTWFya2VyKHRoaXMubWFwLCBtYXJrZXJKc29uLnBvc2l0aW9uKTtcblxuICAgICAgICAgICAgbWFya2VySnNvbi5sYWJlbCA9IHRoaXMuX3BhdGgubWFya2Vycy5sZW5ndGggKyAxO1xuXG4gICAgICAgICAgICBtYXJrZXIuc2VyaWFsID0gbWFya2VySnNvbjtcblxuICAgICAgICAgICAgaWYobWFya2VyLmljb24gPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyLmljb24gPSB0aGlzLmRlZmF1bHRJY29uO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9wYXRoLmFkZChtYXJrZXIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IobGV0IGhhbmRsZXIgb2YgdGhpcy5fYWRkZWRMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGpva2VyIG9uIDE1LjEyLjE2LlxuICpcbiAqXG4gKi9cbmltcG9ydCB7YXNzZXJ0IGFzIGFzc2VydH0gZnJvbSAnLi91dGlscyc7XG5cbmV4cG9ydCBjbGFzcyBQYXRoIHtcbiAgICBnZXQgbWFya2VycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcmtlcnM7XG4gICAgfVxuXG4gICAgc2V0IG1hcmtlcnModmFsdWUpIHtcbiAgICAgICAgdGhpcy5fbWFya2VycyA9IHZhbHVlO1xuICAgIH1cbiAgICAgICAgXG4gICAgX21hcmtlcnMgPSBbXTtcbiAgICBfdXBkYXRlTGlzdGVuZXJzID0gW107XG5cbiAgICAvKipcbiAgICAgKiDQn9C+0LvRg9GH0LXQvdC40LUg0YHQtdGA0LjQsNC70LjQt9C+0LLQsNC90L3QvtCz0L4g0LzQsNGB0YHQuNCy0LBcbiAgICAgKi9cbiAgICBnZXQgc2VyaWFsKCkge1xuICAgICAgICBsZXQgc2VyaWFzID0gdGhpcy5fbWFya2Vycy5tYXAoZnVuY3Rpb24gKG1hcmspIHtcbiAgICAgICAgICAgIHJldHVybiBtYXJrLnNlcmlhbDtcbiAgICAgICAgfSkuam9pbignLCcpO1xuXG4gICAgICAgIGxldCByZXMgPSAnWycgKyBzZXJpYXMgKyAnXSc7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cblxuICAgIGdldCBjb29yZHNBcnJheSgpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMubWFya2Vycy5tYXAoZnVuY3Rpb24gKGNvb3JkKSB7XG4gICAgICAgICAgICByZXR1cm4gY29vcmQuZ2V0UG9zaXRpb24oKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgXG4gICAgcG9pbnRWYWx1ZShpbmRleCwgZmllbGQsIHZhbHVlKSB7XG4gICAgICAgIGFzc2VydChpbmRleCA+IC0xICYmIGluZGV4IDwgdGhpcy5fbWFya2Vycy5sZW5ndGgpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fbWFya2Vyc1tpbmRleF1bZmllbGRdID0gdmFsdWU7XG4gICAgfVxuICAgIFxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWFya2Vycy5sZW5ndGg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog0KHQvNC10L3QsCDQv9C+0LfQuNGG0LjQuCDQuNC90LTQtdC60YHQsFxuICAgICAqIEBwYXJhbSBpbmRleCDQmNC90LTQtdC60YFcbiAgICAgKiBAcGFyYW0gY3JlbSDQodC80LXRidC10L3QuNC1XG4gICAgICovXG4gICAgaW5kZXhEaXNwb3NlKGluZGV4LCBjcmVtKSB7XG4gICAgICAgIGxldCBzID0gaW5kZXggKyBjcmVtO1xuXG4gICAgICAgIGFzc2VydChpbmRleCA+IC0xICYmIGluZGV4IDwgdGhpcy5fbWFya2Vycy5sZW5ndGgpO1xuICAgICAgICBhc3NlcnQocyA+IC0xICYmIHMgPCB0aGlzLl9tYXJrZXJzLmxlbmd0aCk7XG5cbiAgICAgICAgbGV0IGVsZW0gPSB0aGlzLl9tYXJrZXJzW3NdO1xuXG4gICAgICAgIHRoaXMuX21hcmtlcnNbc10gPSB0aGlzLl9tYXJrZXJzW2luZGV4XTtcbiAgICAgICAgdGhpcy5fbWFya2Vyc1tpbmRleF0gPSBlbGVtO1xuXG4gICAgICAgIHRoaXMuY2FsbFVwZGF0ZUhhbmRsZXJzKCk7XG4gICAgfVxuXG4gICAgaW5kZXhSZW1vdmUoaW5kZXgpIHtcbiAgICAgICAgYXNzZXJ0KGluZGV4ID4gLTEgJiYgaW5kZXggPCB0aGlzLl9tYXJrZXJzLmxlbmd0aCk7XG5cbiAgICAgICAgbGV0IGVsZW0gPSB0aGlzLl9tYXJrZXJzW2luZGV4XTtcbiAgICAgICAgZWxlbS5tYXJrZXIuc2V0TWFwKG51bGwpO1xuXG4gICAgICAgIHRoaXMuX21hcmtlcnMuc3BsaWNlKGluZGV4LCAxKTtcblxuICAgICAgICB0aGlzLmNhbGxVcGRhdGVIYW5kbGVycygpO1xuICAgIH1cblxuICAgIGdldCBjb29yZHNTdHIoKSB7XG4gICAgICAgIGxldCByZXMgPSAnJztcbiAgICAgICAgXG4gICAgICAgIGZvcihsZXQgbWFyayBvZiB0aGlzLl9tYXJrZXJzKSB7XG4gICAgICAgICAgICByZXMgKz0gbWFyay5jb29yZHNTdHI7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBcbiAgICBhZGRVcGRhdGVMaXN0ZW5lcihoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUxpc3RlbmVycy5wdXNoKGhhbmRsZXIpO1xuICAgIH1cblxuICAgIGNsZWFyKCkge1xuICAgICAgICBmb3IobGV0IG1hcmsgb2YgdGhpcy5tYXJrZXJzKSB7XG4gICAgICAgICAgICBtYXJrLm1hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1hcmtlcnMgPSBbXTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY2FsbFVwZGF0ZUhhbmRsZXJzKCk7XG4gICAgfVxuXG4gICAgY2FsbFVwZGF0ZUhhbmRsZXJzKCkge1xuICAgICAgICBmb3IobGV0IGhhbmRsZXIgb2YgdGhpcy5fdXBkYXRlTGlzdGVuZXJzKSB7XG4gICAgICAgICAgICBoYW5kbGVyKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhZGQobWFya2VyKSB7XG4gICAgICAgIHRoaXMubWFya2Vycy5wdXNoKG1hcmtlcik7XG4gICAgICAgIG1hcmtlci5tYXJrZXIuYWRkTGlzdGVuZXIoJ2RyYWdlbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNhbGxVcGRhdGVIYW5kbGVycygpO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xuXG4gICAgICAgIGlmKHRoaXMubWFya2Vycy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICB0aGlzLmNhbGxVcGRhdGVIYW5kbGVycygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVmcmVzaExhYmVscygpIHtcbiAgICAgICAgbGV0IGluZGV4ID0gMTtcbiAgICAgICAgZm9yKGxldCBtYXJrIG9mIHRoaXMubWFya2Vycykge1xuICAgICAgICAgICAgaWYobWFyay52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgbWFyay5sYWJlbCA9IGluZGV4ICsgJyc7XG4gICAgICAgICAgICAgICAgaW5kZXggKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKG1hcmtlcnMpIHtcbiAgICAgICAgdGhpcy5tYXJrZXJzID0gbWFya2VycztcblxuICAgICAgICB0aGlzLmFkZFVwZGF0ZUxpc3RlbmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaExhYmVscygpO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH1cbn0iLCIvKipcbiAqIENyZWF0ZWQgYnkgam9rZXIgb24gMTUuMTIuMTYuXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVuZGVyZXIge1xuICAgIGdldCBtYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXA7XG4gICAgfVxuXG4gICAgc2V0IG1hcCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9tYXAgPSB2YWx1ZTtcbiAgICB9XG4gICAgXG4gICAgX21hcCA9IG51bGw7XG4gICAgXG4gICAgXG4gICAgY29uc3RydWN0b3IobWFwKSB7XG4gICAgICAgIHRoaXMuX2RpcmVjdGlvbnNTZXJ2aWNlID0gbmV3IGdvb2dsZS5tYXBzLkRpcmVjdGlvbnNTZXJ2aWNlKCk7XG4gICAgICAgIHRoaXMuX2RpcmVjdGlvbnNEaXNwbGF5ID0gbmV3IGdvb2dsZS5tYXBzLkRpcmVjdGlvbnNSZW5kZXJlcigpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5tYXAgPSBtYXA7XG4gICAgfVxuXG4gICAgd2F5cG9pbnRzKGNvb3Jkcykge1xuICAgICAgICBsZXQgcmVzdWx0ID0gW107XG5cbiAgICAgICAgZm9yKGxldCBpID0gMTsgaSA8IGNvb3Jkcy5sZW5ndGggLSAxOyArK2kpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgICAgICBsb2NhdGlvbjogY29vcmRzW2ldLFxuICAgICAgICAgICAgICAgIHN0b3BvdmVyOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHJlbmRlcihwYXRoKSB7XG4gICAgICAgIGxldCBjb29yZHMgPSBwYXRoLmNvb3Jkc0FycmF5O1xuXG4gICAgICAgIGlmKGNvb3Jkcy5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICB0aGlzLl9kaXJlY3Rpb25zRGlzcGxheS5zZXRNYXAobnVsbCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9kaXJlY3Rpb25zRGlzcGxheS5zZXRNYXAodGhpcy5tYXAubWFwKTtcblxuICAgICAgICBsZXQgd2F5cG9pbnRzID0gdGhpcy53YXlwb2ludHMoY29vcmRzKTtcblxuICAgICAgICBsZXQgcmVxdWVzdCA9IHtcbiAgICAgICAgICAgIG9yaWdpbjogY29vcmRzWzBdLFxuICAgICAgICAgICAgd2F5cG9pbnRzLFxuICAgICAgICAgICAgZGVzdGluYXRpb246IGNvb3Jkc1tjb29yZHMubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgICB0cmF2ZWxNb2RlOiBnb29nbGUubWFwcy5UcmF2ZWxNb2RlLkRSSVZJTkdcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9kaXJlY3Rpb25zU2VydmljZS5yb3V0ZShyZXF1ZXN0LCBmdW5jdGlvbihyZXNwb25zZSwgc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzID09IGdvb2dsZS5tYXBzLkRpcmVjdGlvbnNTdGF0dXMuT0spIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9kaXJlY3Rpb25zRGlzcGxheS5zZXREaXJlY3Rpb25zKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICB9XG59IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGpva2VyIG9uIDE1LjEyLjE2LlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnQoY29uZGl0aW9uLCBtZXNzYWdlKSB7XG4gICAgaWYgKCFjb25kaXRpb24pIHtcbiAgICAgICAgdGhyb3cgbWVzc2FnZSB8fCBcIkFzc2VydGlvbiBmYWlsZWRcIjtcbiAgICB9XG59Il19"}