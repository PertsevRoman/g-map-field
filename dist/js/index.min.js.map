{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/index.js","src/js/lib/map-marker.js","src/js/lib/map.js","src/js/lib/path-generator.js","src/js/lib/path.js","src/js/lib/renderer.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_pathGenerator","_map","_renderer","_path","componentName","document","addEventListener","componentAnchor","getElementsByTagName","console","log","templateName","getAttribute","fieldValue","fieldName","iconsResource","$","get","_icons","data","Prof","Vue","extend","template","mounted","this","init","beginPath","pathGenerator","map","currentPath","Path","renderer","inEdit","computed","icons","methods","clear","defaultIcon","icon","start","finishPath","finish","toTop","index","indexDispose","toDown","remove","indexRemove","center","point","latLng","setCenter","clearPath","setAhead","ahead","render","element","$el","querySelector","GMap","PathGenerator","_renderer2","default","addUpdateListener","$forceUpdate","appendAddListener","elemPosition","size","setTimeout","pickerAnchor","selector","timepicker","on","value","time","attr","pointValue","bind","google","maps","event","addListener","add","position","markerCoords","toJSON","$mount","error","./lib/map","./lib/path","./lib/path-generator","./lib/renderer","2","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","MapMarker","coords","_time","_description","_marker","_template","_label","typeahead","_meta","Marker","draggable","_ahead","meta","set","getDraggable","_icon","marker","setMap","_latLng","LatLng","lat","lng","undefined","dropdownResolver","points","id","name","display","push","item","setLabel","seria","visible","pos","description","label","setPosition","setVisible","getPosition","createElement","load","toString","3","pointCoords","_addedListeners","_defaultIcon","path","_step","_iterator","markersArray","Symbol","iterator","_iteratorNormalCompletion","next","done","markerJson","err","_iteratorError","return","handler","_mapMarker","markers","_iteratorNormalCompletion2","_iteratorError2","_step2","_iterator2","./map-marker","./path","5","_markers","_updateListeners","refreshLabels","crem","_utils","assert","elem","splice","callUpdateHandlers","mark","_didIteratorError2","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","serial","join","coord","res","_iteratorNormalCompletion4","_didIteratorError4","_step4","_iterator4","_iteratorError4","./utils","6","_directionsService","DirectionsService","result","location","coordsArray","_directionsDisplay","origin","destination","travelMode","TravelMode","DRIVING","status","DirectionsStatus","OK","Renderer","7"],"mappings":"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","file":"index.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * Created by joker on 13.12.16.\n *\n * Получение данных\n */\n\nimport {PathGenerator} from \"./lib/path-generator\";\nimport {GMap} from \"./lib/map\";\nimport Renderer from \"./lib/renderer\";\nimport {Path} from \"./lib/path\";\n\nconst componentName = 'path-input';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n    let componentAnchor = document.getElementsByTagName(componentName)[0];\n\n    if(componentAnchor == null) {\n        console.log('Component tag not founded');\n        return;\n    }\n    \n    let templateName = componentAnchor.getAttribute('template');\n    let fieldValue = componentAnchor.getAttribute('field-value');\n    let fieldName = componentAnchor.getAttribute('field-name');\n    let iconsResource = componentAnchor.getAttribute('icons-resource');\n\n    $.get(iconsResource, function (icons) {\n        $.get(templateName, function (data) {\n            try {\n                let Prof = Vue.extend({\n                    template: data,\n                    mounted: function () {\n                        this.init();\n\n                        this.fieldName = fieldName;\n\n                        if(fieldValue) {\n                            this.beginPath(fieldValue);\n                        } else {\n                            this.beginPath();\n                        }\n                    },\n                    data: function () {\n                        return {\n                            pathGenerator: null,\n                            map: null,\n                            currentPath: new Path([]),\n                            renderer: null,\n                            inEdit: true,\n                            fieldName: ''\n                        };\n                    },\n                    computed: {\n                        icons: function () {\n                            return icons;\n                        }\n                    },\n                    methods: {\n                        beginPath: function (data) {\n                            if(this.currentPath) {\n                                this.currentPath.clear();\n                            }\n\n                            this.pathGenerator.defaultIcon = icons[0].icon;\n                            this.pathGenerator.start(this.currentPath, data);\n                        },\n                        finishPath: function () {\n                            this.pathGenerator.finish();\n                        },\n                        toTop: function (index) {\n                            this.currentPath.indexDispose(index, -1);\n                        },\n                        toDown: function (index) {\n                            this.currentPath.indexDispose(index, 1);\n                        },\n                        remove: function (index) {\n                            this.currentPath.indexRemove(index);\n                        },\n                        center: function (point) {\n                            let latLng = point.latLng;\n\n                            this.map.map.setCenter(latLng);\n                        },\n                        clearPath: function () {\n                            this.currentPath.clear();\n                        },\n                        setAhead: function (point, ahead) {\n                            point.setAhead(ahead);\n                            \n                            this.renderer.render(this.currentPath);\n                        },\n                        init: function () {\n                            let element = this.$el.querySelector('.g-maps');\n\n                            this.map = new GMap(element);\n                            this.pathGenerator = new PathGenerator(this.map);\n                            this.renderer = new Renderer(this.map);\n\n                            this.currentPath.addUpdateListener(function () {\n                                /* rem-block */\n                                console.log('Path updating...');\n                                /* end-rem-block */\n\n                                this.renderer.render(this.currentPath);\n                                this.$forceUpdate();\n                            }.bind(this));\n\n                            this.pathGenerator.appendAddListener(function () {\n                                const elemPosition = this.currentPath.size;\n\n                                /* rem-block */\n                                console.log('Adding point...');\n                                /* end-rem-block */\n\n                                setTimeout(function () {\n                                    const selector = 'input[date-time=\"dt-' + (elemPosition - 1) + '\"]';\n                                    const pickerAnchor = $(selector);\n\n                                    pickerAnchor.timepicker({\n                                        showMeridian: false\n                                    }).on('changeTime.timepicker', function (e) {\n                                        const value = e.time.value;\n                                        let index = pickerAnchor.attr('data-index');\n\n                                        this.currentPath.pointValue(index, 'time', value);\n\n                                        /* rem-block */\n                                        console.log('Point added');\n                                        /* end-rem-block */\n                                    }.bind(this));\n                                }.bind(this), 500);\n                            }.bind(this));\n\n                            google.maps.event.addListener(this.map.map, 'click', function(event) {\n                                const markerCoords = event.latLng;\n\n                                this.pathGenerator.add({\n                                    position: markerCoords.toJSON()\n                                });\n\n                                this.$forceUpdate();\n                            }.bind(this));\n                        }\n                    }\n                });\n\n                /* rem-block */\n                console.log('Load component...');\n                /* end-rem-block */\n\n                new Prof().$mount(componentName);\n            } catch (error) {\n                console.log(error);\n                console.log('Не удается определить компонент: Vue.js не инициализирован');\n            }\n        });\n    });\n});","/**\n * Created by joker on 15.12.16.\n */\nexport class MapMarker {\n    get meta() {\n        return this._meta;\n    }\n\n    set meta(value) {\n        this._meta = value;\n    }\n\n    get draggable() {\n        return this._marker.getDraggable();\n    }\n\n    set draggable(value) {\n        this._marker.setDraggable(value);\n    }\n    get icon() {\n        return this._icon;\n    }\n    get time() {\n        return this._time;\n    }\n\n    set time(value) {\n        this._time = value;\n    }\n    get map() {\n        return this._map;\n    }\n\n    set map(value) {\n        this._map = value;\n        this.marker.setMap(value.map);\n    }\n    get latLng() {\n        return this._latLng;\n    }\n\n    set latLng(value) {\n        this._latLng = value;\n\n        this.marker.setPosition(new google.maps.LatLng(value.lat, value.lng));\n    }\n\n    get visible() {\n        return this._marker.getVisible();\n    }\n\n    set visible(value) {\n        this._marker.setVisible(value);\n        this._visible = value;\n    }\n    get description() {\n        return this._description;\n    }\n\n    set icon(path) {\n        this._icon = path;\n    }\n\n    set description(value) {\n        this._description = value;\n\n        if(this._ahead) {\n            this._ahead = false;\n            return;\n        }\n\n        if(this._description != '') {\n            if(dropdownResolver != undefined) {\n                dropdownResolver(value, function (points) {\n                    let typeahead = [];\n                    \n                    for(let index in points) {\n                        let item = {\n                            _meta: {\n                                id: points[index].id\n                            },\n                            name: points[index].name,\n                            lat: points[index].lat,\n                            lng: points[index].lng\n                        };\n\n                        if(points[index].display != undefined) {\n                            item['display'] = points[index].display;\n                        }\n\n                        typeahead.push(item);\n                    }\n\n                    this.typeahead = typeahead;\n                }.bind(this));\n            }\n        } else {\n            this.typeahead = [];\n        }\n    }\n    \n    get label() {\n        return this._label;\n    }\n\n    set label(value) {\n        this._label = value;\n\n        if(this._marker) {\n            this._marker.setLabel(value);\n        }\n    }\n    get marker() {\n        return this._marker;\n    }\n    get template() {\n        return this._template;\n    }\n\n    set template(value) {\n        this._template = value;\n    }\n\n    get serial() {\n        let seria = {\n            description: this.description,\n            position: this.marker.getPosition().toJSON(),\n            visible: this.visible,\n            time: this.time,\n            icon: this.icon,\n            draggable: this.draggable,\n            meta: this.meta\n        };\n\n        return JSON.stringify(seria);\n    }\n    \n    remove() {\n        this.marker.setMap(null);\n    }\n\n    setAhead(ahead) {\n        this._ahead = true;\n\n        this.description = ahead.name;\n\n        const position = {\n            lat: ahead.lat,\n            lng: ahead.lng\n        };\n\n        if(ahead['display'] != undefined) {\n            if(ahead['display']['svg'] != undefined) {\n                this.icon = ahead['display']['svg'];\n            }\n        }\n\n        this.latLng = position;\n        this.meta = ahead._meta;\n\n        this.typeahead = [];\n    }\n\n    set serial(value) {\n        let pos = value.position;\n\n        this.latLng = new google.maps.LatLng(pos);\n\n        this._ahead = true;\n        this.description = value.description || '';\n\n        if(value.label) {\n            this.label = value.label + '';\n        }\n        \n        if(typeof value.visible === 'boolean') {\n            this.visible = value.visible;\n        } else {\n            this.visible = true;\n        }\n\n        this.time = value.time || '0:00';\n        this.icon = value.icon || '';\n        this.meta = value.meta || {};\n\n        this.marker.setPosition(this.latLng);\n        this.marker.setLabel(this.label);\n        this.marker.setVisible(this.visible);\n    }\n\n    constructor(map, coords, template) {\n        if(!map) {\n            throw 'Не определена карта';\n        }\n\n        this._marker = new google.maps.Marker({\n            map: map.map,\n            position: coords,\n            draggable: true\n        });\n        \n        this.map = map;\n\n        if(template) {\n            this.template = template;\n        }\n    }\n\n    _time = '';\n    _map = null;\n    _latLng = {};\n    _description = '';\n    _marker = null;\n    _template = 'content.html';\n    _label = '';\n    _visible = true;\n    _icon = '';\n    typeahead = [];\n    _meta = {};\n\n    getPosition() {\n        return this._marker.getPosition();\n    }\n\n    get coordsStr() {\n        let pos = this.getPosition();\n        return pos.toString();\n    }\n\n    addInfo() {\n        let data = document.createElement('div');\n\n        $(data).load('src/tpl/' + this.template);\n\n        let infowindow = new google.maps.InfoWindow({\n            content: data\n        });\n\n        this._marker.addListener('mouseover', function() {\n            infowindow.open(map, this._marker);\n        });\n\n        this._marker.addListener('mouseout', function() {\n            infowindow.close();\n        });\n    }\n}","/**\n * Created by joker on 15.12.16.\n */\n\nexport class GMap {\n    get map() {\n        return this._map;\n    }\n\n    set map(value) {\n        this._map = value;\n    }\n\n    /**\n     * Ссылка на объект карт\n     */\n    _map;\n\n    constructor(element) {\n        var pointCoords = {lat: 52.61667, lng: 39.6000};\n\n        this._map = new google.maps.Map(element, {\n            center: pointCoords,\n            zoom: 16\n        });\n\n        google.maps.event.trigger(this._map, 'resize');\n    }\n}","import {Path} from \"./path\";\nimport {MapMarker} from \"./map-marker\";\n/**\n * Created by joker on 15.12.16.\n */\n\nexport class PathGenerator {\n    get defaultIcon() {\n        return this._defaultIcon;\n    }\n\n    set defaultIcon(value) {\n        this._defaultIcon = value;\n    }\n    get counter() {\n        return this._counter;\n    }\n\n    set counter(value) {\n        this._counter = value;\n    }\n    get map() {\n        return this._map;\n    }\n\n    set map(value) {\n        this._map = value;\n    }\n    _map;\n    _path = [];\n    _counter = 1;\n    _addedListeners = [];\n    _defaultIcon = '';\n\n    constructor(map) {\n        if(map) {\n            this.map = map;\n        }\n    }\n\n    /**\n     * Запуск генератора\n     */\n    start(path, data) {\n        this._path = path;\n\n        if(data) {\n            this._path.clear();\n\n            let markersArray = JSON.parse(data);\n\n            for (let markerJson of markersArray) {\n                this.add(markerJson);\n            }\n        }\n    }\n\n    finish() {\n        this._path = null;\n    }\n    \n    appendAddListener(handler) {\n        this._addedListeners.push(handler);\n    }\n\n    add(markerJson) {\n        if(this._path) {\n            let marker = new MapMarker(this.map, markerJson.position);\n\n            markerJson.label = this._path.markers.length + 1;\n\n            marker.serial = markerJson;\n\n            if(marker.icon === '') {\n                marker.icon = this.defaultIcon;\n            }\n\n            this._path.add(marker);\n            \n            for(let handler of this._addedListeners) {\n                handler();\n            }\n        }\n    }\n}","/**\n * Created by joker on 15.12.16.\n *\n *\n */\nimport {assert as assert} from './utils';\n\nexport class Path {\n    get markers() {\n        return this._markers;\n    }\n\n    set markers(value) {\n        this._markers = value;\n    }\n        \n    _markers = [];\n    _updateListeners = [];\n\n    /**\n     * Получение сериализованного массива\n     */\n    get serial() {\n        let serias = this._markers.map(function (mark) {\n            return mark.serial;\n        }).join(',');\n\n        let res = '[' + serias + ']';\n        \n        return res;\n    }\n\n    get coordsArray() {\n        let result = this.markers.map(function (coord) {\n            return coord.getPosition();\n        });\n\n        return result;\n    }\n    \n    pointValue(index, field, value) {\n        assert(index > -1 && index < this._markers.length);\n        \n        this._markers[index][field] = value;\n    }\n    \n    get size() {\n        return this._markers.length;\n    }\n\n    /**\n     * Смена позиции индекса\n     * @param index Индекс\n     * @param crem Смещение\n     */\n    indexDispose(index, crem) {\n        let s = index + crem;\n\n        assert(index > -1 && index < this._markers.length);\n        assert(s > -1 && s < this._markers.length);\n\n        let elem = this._markers[s];\n\n        this._markers[s] = this._markers[index];\n        this._markers[index] = elem;\n\n        this.callUpdateHandlers();\n    }\n\n    indexRemove(index) {\n        assert(index > -1 && index < this._markers.length);\n\n        let elem = this._markers[index];\n        elem.marker.setMap(null);\n\n        this._markers.splice(index, 1);\n\n        this.callUpdateHandlers();\n    }\n\n    get coordsStr() {\n        let res = '';\n        \n        for(let mark of this._markers) {\n            res += mark.coordsStr;\n        }\n\n        return res;\n    }\n    \n    addUpdateListener(handler) {\n        this._updateListeners.push(handler);\n    }\n\n    clear() {\n        for(let mark of this.markers) {\n            mark.marker.setMap(null);\n        }\n\n        this.markers = [];\n        \n        this.callUpdateHandlers();\n    }\n\n    callUpdateHandlers() {\n        for(let handler of this._updateListeners) {\n            handler();\n        }\n    }\n\n    add(marker) {\n        this.markers.push(marker);\n        marker.marker.addListener('dragend', function () {\n            this.callUpdateHandlers();\n        }.bind(this));\n\n        if(this.markers.length > 1) {\n            this.callUpdateHandlers();\n        }\n    }\n\n    refreshLabels() {\n        let index = 1;\n        for(let mark of this.markers) {\n            if(mark.visible) {\n                mark.label = index + '';\n                index += 1;\n            }\n        }\n    }\n\n    constructor(markers) {\n        this.markers = markers;\n\n        this.addUpdateListener(function () {\n            this.refreshLabels();\n        }.bind(this));\n    }\n}","/**\n * Created by joker on 15.12.16.\n */\n\nexport default class Renderer {\n    get map() {\n        return this._map;\n    }\n\n    set map(value) {\n        this._map = value;\n    }\n    \n    _map = null;\n    \n    \n    constructor(map) {\n        this._directionsService = new google.maps.DirectionsService();\n        this._directionsDisplay = new google.maps.DirectionsRenderer();\n        \n        this.map = map;\n    }\n\n    waypoints(coords) {\n        let result = [];\n\n        for(let i = 1; i < coords.length - 1; ++i) {\n            result.push({\n                location: coords[i],\n                stopover: false\n            });\n        }\n\n        return result;\n    }\n\n    render(path) {\n        let coords = path.coordsArray;\n\n        if(coords.length < 2) {\n            this._directionsDisplay.setMap(null);\n            return;\n        }\n\n        this._directionsDisplay.setMap(this.map.map);\n\n        let waypoints = this.waypoints(coords);\n\n        let request = {\n            origin: coords[0],\n            waypoints,\n            destination: coords[coords.length - 1],\n            travelMode: google.maps.TravelMode.DRIVING\n        };\n\n        this._directionsService.route(request, function(response, status) {\n            if (status == google.maps.DirectionsStatus.OK) {\n                this._directionsDisplay.setDirections(response);\n            }\n        }.bind(this));\n    }\n}"]}